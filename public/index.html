<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" href="images/favicon.ico">
        <link rel="icon" href="./images/favicon.ico" type="image/x-icon"/>

        <title>Banner Maker</title>

        <!-- Bootstrap core CSS -->
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel='stylesheet prefetch' href='https://netdna.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.css'>
        <link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Dosis|Candal'>

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
            <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

        <!-- Custom styles for this template -->
        <nlink href="css/jumbotron.css" rel="stylesheet">
        <link href="css/banner-maker.css" rel="stylesheet">
        <link href="textbar.css" rel="stylesheet">
        <link href="css/bootstrap-colorselector.css" rel="stylesheet">
        <link rel='stylesheet' href='css/spectrum.css' />
    </head>

    <body>
        <div class="container">
            <p style="background-color:lightblue;display:none;">Reference width</p>
        </div>
        
        <div style="border-top:2px solid #2e9abd;background-color:rgb(236, 238, 239);">
            <div class="container">
                <h1 class="logo-head">Banner Maker</h1>
                <p class="logo-text">Creating custom gif and html banners. </p>
            </div>
        </div>

        <nav class="navbar navbar-default navbar-static-top navbar-inverse">
            <div class="container">
                <div class="col-md-4">
                    <div class="navbar-header" style="position: relative;">
                        <!--<button  type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>-->
                        
                        <a class="navbar-brand" href="#"> <img src="images/squirrel.png" class="squirrel" /></a>
                    </div>
                    <p class="" style="font-size:14px; color:rgb(236, 238, 239);text-align:left;padding-top:16px;padding-left:62px;">
                        Powered by Conferience | contact us
                    </p>
                </div>
                
                <div class="col-md-8">
                    <form class="navbar-form navbar-left save-form" role="search">
                        <div class="form-group">
                            <input data-bind="value: bannerName" type="text" class="form-control" placeholder="Untitled Banner">
                        </div>
                        <a data-bind="click: saveBanner" class="btn btn-success">Save</a>
                        <div class="dropdown" style="display:inline-block;">
                            <a class="btn btn-success dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                Download Banner
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                <li><a data-bind="click: downloadBanner.bind($data, 'gif')" href="javascript:;">as GIF</a></li>
                                <li><a data-bind="click: downloadBanner.bind($data, 'html')" href="javascript:;">as HTML</a></li>
                            </ul>
                        </div>
                    </form>
                    <form class="navbar-form navbar-right save-form" role="search">
                        <a data-bind="visible: !isLoggedIn(), click: function(data, event){modalNo(5);isModal(true);}" class="btn btn-primary user-control">Login</a>
                        <a data-bind="visible: !isLoggedIn(), click: function(data, event){modalNo(4);isModal(true);}" class="btn btn-primary user-control">Register</a>
                        
                        <div class="btn" style="display:inline-block;font-size:16px;">
                            <i class="fa fa-user" aria-hidden="true" style="color: #2e9abd;"></i>&nbsp;
                            <span data-bind="visible: isLoggedIn(), text: email" style="color: #ccc;"></span>
                        </div>
                        <div class="dropdown" style="display:inline-block;">
                            <a data-bind="visible: isLoggedIn()" class="btn btn-primary dropdown-toggle user-control" type="button" id="dropdownMenu4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                My Banners
                                <span class="caret"></span>
                            </a>
                            <ul data-bind="foreach: myBanners" class="dropdown-menu" aria-labelledby="dropdownMenu4">
                                <li><a data-bind="text: bannerName, click: $root.loadBanner.bind($data, bannerName)" href="javascript:;"> a banner name</a></li>
                            </ul>
                        </div>
                    </form>
                    <!--<div id="navbar" class="navbar-collapse collapse">
                        <ul class="nav navbar-nav">
                            <li class="active"><a href="#">Home</a></li>
                            <li><a href="#about">About</a></li>
                            <li><a href="#contact">Contact</a></li>
                            <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Action</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something else here</a></li>
                                <li role="separator" class="divider"></li>
                                <li class="dropdown-header">Nav header</li>
                                <li><a href="#">Separated link</a></li>
                                <li><a href="#">One more separated link</a></li>
                            </ul>
                            </li>
                        </ul>
                    </div>-->
                
                </div><!--/.nav-collapse -->
            </div>
        </nav>
        
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h3> Slides </h3> <hr>

                    <div data-bind="foreach: slides" id="previews-container" class="ui-sortable">

                        <div data-bind="attr: { id: $data.previewId }, css: { current: $index() == $root.icurSlide() }" class="slide-preview">
                            <div data-bind="with: $data.slidePreview, click: $root.selectSlide" class="slide-thumb">
                                <span data-bind="with: dimensions">
                                    <img data-bind="style: {width: width, height: height, top: top, left: left}, attr: { src: $parent.img }" 
                                            style="width:100px;height:50px;position:absolute;" class="slide-img">
                                </span>

                            </div>
                            <div class="order-control" style="position: absolute;"><span> <br> 1</span>&nbsp;<input checked="" class="include-box" type="checkbox" name="check1" value="">
                                &nbsp; <img class="mid-ctrl" src="images/sort-control.png" alt="mid" style="width:29px;height:25px">
                            </div>
                            <p data-bind="visible: $index() == $root.icurSlide()" class="preview-toolbar" style="display: block;">
                                    <input type="hidden" name="slide-id" value="1">
                                    <a data-bind="click: $root.deleteCurrentSlide" class="btn btn-default btn-sm btn-delete" role="button">
                                        <i class="fa fa-times" aria-hidden="true"></i> Del
                                    </a><a data-bind="click: $root.duplicateCurrentSlide" class="btn btn-default btn-sm dup-slide" role="button">
                                        Duplicate
                                    </a><a class="btn btn-default btn-sm btn-delay" href="javascript:;" role="button">
                                    Delay: 
                                    <span data-bind="text: delay" class="delay-val" style="color:dodgerblue;font-weight:bold;">1</span>s
                                </a><a data-bind="click: incrementDelay" class="btn btn-default btn-sm btn-delay-up" role="button"> +</a><a data-bind="click: decrementDelay" class="btn btn-default btn-sm btn-delay-down" role="button"> -</a>
                            </p>
                            <hr>
                        </div>

                    </div>
                    <a data-bind="click: addSlide" id="add-slide" class="btn btn-default" style="float: right;">Add Slide</a>

                </div>

                <div class="col-md-8">
                    <h3 style="position: relative;"> 
                        Slide Editor: <span data-bind="text: 'Slide ' + (icurSlide()+1)" style="color: grey"> </span>
                        <div style="display:inline-block;position:absolute;right:10px;top:-8px;font-size:20px;"><span style="color:gray;"> size:</span>
                           <select data-bind="options: suggestedBannerSizes, value: selectedBannerSize, event: {change: changeBannerSize}" class="form-control" id="select-size2" style="">
                        
                            </select>
                        </div>
                    </h3> <hr>
                    <div class="text-center">
                        <div class="nbtn-group object-toolbar" style="margin-bottom: 18px;">
                            <a data-bind="click: currentSlide().undo, css: { disabled: currentSlide().iundo() < 0 }" type="button" class="btn btn-default"><i class="fa fa-rotate-left" aria-hidden="true"></i>&nbsp;Undo</a>
                            <a data-bind="click: currentSlide().redo, css: { disabled: currentSlide().iundo() == currentSlide().undoStack.length - 1 }" type="button" class="btn btn-default"><i class="fa fa-rotate-right" aria-hidden="true"></i>&nbsp;Redo</a>
                            <a data-bind="click: currentSlide().centerSelectedObject, css: { disabled: currentSlide().selectedObject() == null }" type="button" class="btn btn-default">Center</a>
                            <a data-bind="css: { disabled: currentSlide().selectedObject() == null }" type="button" class="btn btn-default">Original Size</a>
                            <a data-bind="click: currentSlide().duplicateSelectedObject, css: { disabled: currentSlide().selectedObject() == null }" type="button" class="btn btn-default">Duplicate</a>
                            <a data-bind="text: currentSlide().iundo() +', ' + currentSlide().undoStack.length , css: { disabled: currentSlide().selectedObject() == null }" type="button" class="btn btn-default">Group</a>
                            <a data-bind="click: currentSlide().deleteSelectedObject, css: { disabled: currentSlide().selectedObject() == null }" type="button" class="btn btn-default"><i class="fa fa-times" style="color: darkred;" aria-hidden="true"></i>&nbsp;Delete</a>
                        </div> 
                    </div>
                      
                    <div id="banner-container" class="" data-bind="style: {height: (bannerSize.height() + 20) + 'px'}" style="height: 300px;">

                        <div></div>
                        <div class="effect7 slide current" data-bind="style: {height: bannerSize.height() + 'px', width: bannerSize.width() + 'px'}"
                                                           style="width: 728px; height: 280px;">
                           
                            <div data-bind="foreach: slides">
                                <div data-bind="canvas: $data, visible: $index() == $root.icurSlide()"> 
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    <div class="text-center">
                        <div id="text-edit" class="nbtn-group object-toolbar" style="margin-bottom: 18px;display:none;">
                            <span style="font-size:16px;"> Text Editing: </span> 
                            <a data-bind="click: textEdit.bind($data, 'bold', '')" type="button" class="btn btn-default"><i class="fa fa-bold" aria-hidden="true"></i></a>
                            <a data-bind="click: textEdit.bind($data, 'italic', '')" type="button" class="btn btn-default"><i class="fa fa-italic" aria-hidden="true"></i></a>
                            <a data-bind="click: textEdit.bind($data, 'underline', '')" type="button" class="btn btn-default"><i class="fa fa-underline" aria-hidden="true"></i></a>
                            <a data-bind="click: textEdit.bind($data, 'align', 'left')" type="button" class="btn btn-default"><i class="fa fa-align-left" aria-hidden="true"></i></a>
                            <a data-bind="click: textEdit.bind($data, 'align', 'center')" type="button" class="btn btn-default"><i class="fa fa-align-center" aria-hidden="true"></i></a>
                            <a data-bind="click: textEdit.bind($data, 'align', 'right')" type="button" class="btn btn-default"><i class="fa fa-align-right" aria-hidden="true"></i></a>
                            Color : <input data-bind="value: textColor" type="color" value="#000" style="width:24px"> &nbsp;BgColor : <input data-bind="value: textBgColor" type="color" style="width:24px">&nbsp;
                            Size: <input data-bind="value: textSize" type="range" min="5" max="150" style="width:74px;display:inline-block;position:relative;top:7px;">
                            <div class="dropup" style="display:inline-block;">
                                <a id="dropdownMenu1" class="btn btn-default dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">
                                    Font 
                                    <i class="fa fa-caret-up" aria-hidden="true"></i></a>
                                </a>
                                <ul data-bind="foreach: fonts" class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                    <li><a href="javascript:;" data-bind="click: $parent.setTextFont, text: $data, style: {fontFamily: $data}" >Action</a></li>
                                    
                                </ul>
                            </div>
                        </div> 
                    </div>
                    <div class="nbtn-group btn-group-lg banner-toolbar" role="group" aria-label="...">
                        <a data-bind="click: uploadImage" type="button" class="btn btn-primary">
                            <i class="fa fa-image" aria-hidden="true"></i>&nbsp;Add Image</a>
                        <a data-bind="click: addText" type="button" class="btn btn-primary">Add Text</a>
                        <a type="button" class="btn btn-default">Background: 
                            <input data-bind="value: currentSlide().backgroundColor" type="color" value="#fff" style="position:relative;width:24px;top:-1px;">
                        </a>
                        <!--<a type="button" class="btn btn-default">Add Shape</a>-->
                        <a data-bind="click: currentSlide().clearSlide" type="button" class="btn btn-default">
                            <i class="fa fa-times" aria-hidden="true"></i>&nbsp;Clear Slide
                        </a>
                        <br>
                        <a data-bind="click: currentSlide().cloneCanvas" type="button" class="btn btn-default" style="border:none;width:375px;">
                            URL (for HTML Banners): <input data-bind="value: currentSlide().URL" type="text" value="" style="width:100%;">
                        </a>
                        <input id="choose-file" type="file" name="imageField" hidden="true" style="display:none;" />
                    </div>
                </div>

            </div>
        </div>
        <!--<div>
            width: <input type="text" data-bind="value: swidth"/>, height: 
            <input type="text" data-bind="value: sheight"/> <br>
             width:<span data-bind="text: bannerSize.width"></span>, height: 
            <span data-bind="text: bannerSize.height"></span>
        </div>-->
        <a id="download-banner" class="btn" download="banner.gif" href="javascript:;" style="display:none;">Download Banner utility link</a>
        <div data-bind="visible: isModal" id="myModal" class="modal">
            <div class="modal-content modal1">
                <h3 data-bind="visible: modalNo() == 1"> Create a new banner </h3>
                <h3 data-bind="visible: modalNo() == 2" class="warning" > Do you want to save this banner? </h3>
                <h3 data-bind="visible: modalNo() == 3"> Html Banner </h3>
                <h3 data-bind="visible: modalNo() == 4"> Register </h3>
                <h3 data-bind="visible: modalNo() == 5"> Login </h3>
                <hr/>
                <!-- <span class="close">&times;</span>-->
                <p data-bind="visible: isModalError, html: modalErrorMsg" class="suggest attention">
                    
                    Changing the size will create a new banner and the old one will be deleted! <br>
                    If you don't want to lose the current banner, please save it first.
                </p>
                <p data-bind="visible: modalNo() == 1" class="suggest">Please choose a <b>size</b> for the new banner:
                    <select data-bind="options: suggestedBannerSizes, value: selectedBannerSize" class="form-control" id="select-size" style="">
                        
                    </select>
                    <input data-bind="visible: isCustomSize, value: customBannerSize.width" type="text" class="form-control dim" style="ndisplay:none;" placeholder="width">
                    <span data-bind="visible: isCustomSize" class="times">x</span>
                    <input data-bind="visible: isCustomSize, value: customBannerSize.height" type="text" class="form-control dim" style="ndisplay:none;"placeholder="height">
                </p>
                <p data-bind="visible: modalNo() == 2" class="suggest">
                    Changing size will close this banner and create a new one. If you don't save your changes will be lost.
                    You can save this banner or download it.
                </p>
                <p data-bind="visible: modalNo() == 3" class="suggest">
                    Just copy this html code and insert it to the webpage of your liking: <br><br>
                    <textarea id="html-banner" rows="4" style="width: 550px;">

                    </textarea>
                </p>
                <p data-bind="visible: modalNo() == 4" class="suggest">
                    By registering an account for free, you get access to the full features of Banner Maker. Please provide a valid email. <br>
                </p>
                
                <div data-bind="visible: modalNo() == 4" class="suggest register-form" style="text-align:center">
                    
                    <table style="width: 405px; margin:0 auto; padding: 5px;">
                    <tr>
                        <td style="text-align:right;font-weight: 600;">your email: &nbsp</td>
                        <td> <input data-bind="value: email" type="text" class="form-control" placeholder="email" ></td>
                    </tr>
                    <tr>
                        <td style="text-align:right;font-weight: 600;"> password: &nbsp</td>
                        <td> <input data-bind="value: password" type="password" class="form-control" placeholder="password" ></td>
                    </tr>
                    <tr>
                        <td style="text-align:right;font-weight: 600;"> confirm password: &nbsp</td>
                        <td><input data-bind="value: passwordConfirm" type="password" class="form-control" placeholder="confirm password" ></td>
                    </tr>
                    <!--<tr>
                        <td style="text-align:right;font-weight: bold;"> email: &nbsp</td>
                        <td> <input id="email-register" type="text" class="form-control" placeholder="email" > </td>
                    </tr>-->
                    </table>
                </div>
                
                 <p data-bind="visible: modalNo() == 5" class="suggest" style="text-align:center">
                    <input data-bind="value: email" type="text" class="form-control" placeholder="Email" style="display:inline-block;width:250px;font-size:16px;" > &nbsp
                    <input data-bind="value: password" type="password" class="form-control" placeholder="Password" style="display:inline-block;width:250px;font-size:16px;" >
                    
                </p>

                <!--<p class="suggest">Please choose a <b>name</b> for the new banner:
                <input id="new-banner-name" type="text" class="form-control dim" style="width: 155px;" placeholder="new banner name">
                </p>-->
                <hr/>
                <p>
                    <a data-bind="click: createNewBanner, visible: modalNo() == 1" id="nbegin-editing" class="btn btn-primary btn-lg" style="float: right;" role="button">Create Banner</a>
                    <a data-bind="click: function(data, event) { isModal(false);selectedBannerSize(bannerSize.width()+' x '+bannerSize.height()); }, visible: modalNo() == 1" class="btn btn-default btn-lg" style="float: right;text-shadow:none;" role="button">Cancel</a>

                    <div data-bind="visible: modalNo() == 2" class="dropdown" style="display:inline-block; float:right;">
                        <a class="btn btn-primary btn-lg dropdown-toggle" type="button" id="dropdownMenu3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Download
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu3" style="font-size: 16px;">
                            <li><a data-bind="click: downloadBanner.bind($data, 'gif')" href="javascript:;">as GIF</a></li>
                            <li><a data-bind="click: downloadBanner.bind($data, 'html')" href="javascript:;">as HTML</a></li>
                        </ul>
                    </div>
                    <a data-bind="click: modalNo(1), visible: modalNo() == 2" class="btn btn-primary btn-lg" style="float: right;" role="button">Save</a>
                    <a data-bind="click: modalNo(1), visible: modalNo() == 2" class="btn btn-default btn-lg" style="float: right;text-shadow:none;" role="button">No</a>
                    <a id="" class="btn btn-secondary cancel-create hidden" style="float: right;" href="javascript:;" role="button">Cancel</a>

                    <a data-bind="click: function(data, event) { isModal(false); }, visible: modalNo() == 3" class="btn btn-primary btn-lg" style="float: right;" role="button">Ok</a>
                    
                    <a data-bind="click: register, visible: modalNo() == 4" class="btn btn-primary btn-lg" style="float: right;" role="button">Register</a>
                    <a data-bind="click: function(data, event) { isModal(false); }, visible: modalNo() == 4" class="btn btn-default btn-lg" style="float: right;text-shadow:none;" role="button">Cancel</a>

                    <a data-bind="click: login, visible: modalNo() == 5" class="btn btn-primary btn-lg" style="float: right;" role="button">Login</a>
                    <a data-bind="click: function(data, event) { isModal(false); }, visible: modalNo() == 5" class="btn btn-default btn-lg" style="float: right;text-shadow:none;" role="button">Cancel</a>
                </p>
                <div style="clear:both;"></div>
            </div>
        </div>


        <img id="mirror" src=""/>
        <!--<footer class="footer">
            <div class="container">
                <p class="text-muted">Powered by Conferience</p>
            </div>
        </footer>-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script type='text/javascript' src='js/knockout-3.4.2.js'></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.9/fabric.min.js"></script>
        <script type='text/javascript' src="js/gif.js"></script>

        <script type='text/javascript' src='js/bannerMakerViewModel.js'></script>
    </body>
</html>